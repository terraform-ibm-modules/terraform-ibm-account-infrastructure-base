{
  "products": [
    {
      "name": "deploy-arch-ibm-account-infra-base",
      "label": "Account Infrastructure Base",
      "product_kind": "solution",
      "tags": [
        "ibm_created",
        "target_terraform",
        "terraform",
        "devops",
        "security",
        "solution"
      ],
      "keywords": [
        "base layer",
        "IaC",
        "infrastructure as code",
        "terraform",
        "solution",
        "account",
        "iam"
      ],
      "short_description": "Creates and configures the base layer components of an IBM Cloud account",
      "long_description": "This architecture supports creating and configuring the foundational components of an IBM Cloud account. This includes IAM account settings, Activity Tracker routing, Cloud Objects Storage, a trusted profile and associated access groups, and the resource group in which all resources are provisioned.",
      "offering_docs_url": "https://github.com/terraform-ibm-modules/terraform-ibm-base-account-enterprise/blob/main/README.md",
      "offering_icon_url": "https://raw.githubusercontent.com/terraform-ibm-modules/documentation/main/icons/security_icon.svg",
      "provider_name": "IBM",
      "features": [
        {
          "title": "Configures IAM account settings",
          "description": "Configures IAM account settings to meet compliance requirements fof the IBM Cloud Framework for Financial Services."
        },
        {
          "title": "Creates Activity Tracker route and target",
          "description": "Creates Activity Tracker route and target, sending logs to a Cloud Object Storage bucket."
        },
        {
          "title": "Creates access controls",
          "description": "Creates a trusted profile and associated access group to give Projects access to securely deploy solutions in this account."
        },
        {
          "title": "Creates a resource group",
          "description": "Creates resource group where all resources created by this solution are provisioned."
        }
      ],
      "support_details": "This product is in the community registry, as such support is handled through the originated repo. If you experience issues please open an issue in that repository [https://github.com/terraform-ibm-modules/terraform-ibm-account-infrastructure-base/issues](https://github.com/terraform-ibm-modules/terraform-ibm-account-infrastructure-base/issues). Please note this product is not supported via the IBM Cloud Support Center.",
      "flavors": [
        {
          "label": "Standard",
          "name": "standard",
          "install_type": "fullstack",
          "working_directory": "solutions/account-infrastructure-base",
          "compliance": {
            "authority": "scc-v3",
            "profiles": [
              {
                "profile_name": "IBM Cloud Framework for Financial Services",
                "profile_version": "1.6.0"
              }
            ]
          },
          "iam_permissions": [
            {
              "role_crns": [
                "crn:v1:bluemix:public:iam::::serviceRole:Manager"
              ],
              "service_name": "cloud-object-storage"
            },
            {
              "role_crns": [
                "crn:v1:bluemix:public:iam::::role:Administrator"
              ],
              "service_name": "iam-identity"
            },
            {
              "role_crns": [
                "crn:v1:bluemix:public:iam::::serviceRole:Writer",
                "crn:v1:bluemix:public:iam::::role:Administrator"
              ],
              "service_name": "atracker"
            }
          ],
          "architecture": {
            "descriptions": "The Account Infrastructure Base architecture provides a standardized approach to setting up cloud account settings and related audit logging controls as outlined in the IBM Cloud Framework for Financial Services. The architecture includes configurations for IAM settings and access controls that enforce security best practices. Storing Activity Tracker logs in a Cloud Object Storage bucket ensures that the log data is securely retained and easily accessible for analysis, auditing, and compliance purposes. You can use this architecture as a base for deploying additional services and resources in multiple types of accounts, such as administrative or workload accounts.",
            "diagrams": [
              {
                "diagram": {
                  "caption": "Account Infrastructure Base",
                  "url": "https://raw.githubusercontent.com/terraform-ibm-modules/terraform-ibm-account-infrastructure-base/main/reference-architectures/base-account-enterprise.svg",
                  "type": "image/svg+xml"
                },
                "description": "The Account Infrastructure Base architecture provides a standardized approach to setting up cloud account settings and related audit logging controls as outlined in the IBM Cloud Framework for Financial Services. The architecture includes configurations for IAM settings and access controls that enforce security best practices. Storing Activity Tracker logs in a Cloud Object Storage bucket ensures that the log data is securely retained and easily accessible for analysis, auditing, and compliance purposes. You can use this architecture as a base for deploying additional services and resources in multiple types of accounts, such as administrative or workload accounts."
              }
            ]
          },
          "configuration": [
            {
              "key": "ibmcloud_api_key",
              "type": "string",
              "default_value": null,
              "description": "The IBM Cloud API key that is used by the provider to authenticate with IBM Cloud to create the resources.",
              "required": true
            },
            {
              "key": "skip_iam_account_settings",
              "type": "boolean",
              "required": false,
              "default_value": false,
              "description": "Set to true to skip the IAM account settings being applied to the account. For more information on these settings, see https://github.com/terraform-ibm-modules/terraform-ibm-iam-account-settings/blob/main/README.md"
            },
            {
              "key": "region",
              "type": "region",
              "default_value": "us-south",
              "description": "The region to provision the Object Storage resources created by this solution. Only required if `provision_atracker_cos` is true.",
              "required": false
            },
            {
              "key": "prefix",
              "type": "string",
              "default_value": null,
              "description": "An optional prefix to append to all resources created by this solution.",
              "required": false
            },
            {
              "key": "resource_tags",
              "type": "array",
              "default_value": [],
              "description": "An optional list of tags to be added to the Object Storage resources created by this solution. Required only if `provision_atracker_cos` is true.",
              "required": false
            },
            {
              "key": "kms_key_crn",
              "type": "string",
              "default_value": null,
              "description": "The CRN of the key management service key to encrypt the Object Storage bucket. Required if `provision_atracker_cos` is true.",
              "required": false
            },
            {
              "key": "cos_bucket_management_endpoint_type",
              "type": "string",
              "default_value": "public",
              "options": [
                "public",
                "private",
                "direct"
              ]
            },
            {
              "key": "allowed_ip_addresses",
              "type": "array",
              "required": false
            },
            {
              "key": "provision_atracker_cos",
              "type": "boolean",
              "required": false,
              "default_value": false
            },
            {
              "key": "skip_cos_kms_auth_policy",
              "type": "boolean",
              "required": false,
              "default_value": false
            },
            {
              "key": "security_resource_group_name",
              "type": "string",
              "required": false,
              "default_value": null
            },
            {
              "key": "existing_security_resource_group_name",
              "type": "string",
              "required": false,
              "default_value": null
            },
            {
              "key": "audit_resource_group_name",
              "type": "string",
              "required": false,
              "default_value": null
            },
            {
              "key": "existing_audit_resource_group_name",
              "type": "string",
              "required": false,
              "default_value": null
            },
            {
              "key": "observability_resource_group_name",
              "type": "string",
              "required": false,
              "default_value": null
            },
            {
              "key": "existing_observability_resource_group_name",
              "type": "string",
              "required": false,
              "default_value": null
            },
            {
              "key": "management_resource_group_name",
              "type": "string",
              "required": false,
              "default_value": null
            },
            {
              "key": "existing_management_resource_group_name",
              "type": "string",
              "required": false,
              "default_value": null
            },
            {
              "key": "workload_resource_group_name",
              "type": "string",
              "required": false,
              "default_value": null
            },
            {
              "key": "existing_workload_resource_group_name",
              "type": "string",
              "required": false,
              "default_value": null
            },
            {
              "key": "edge_resource_group_name",
              "type": "string",
              "required": false,
              "default_value": null
            },
            {
              "key": "existing_edge_resource_group_name",
              "type": "string",
              "required": false,
              "default_value": null
            },
            {
              "key": "devops_resource_group_name",
              "type": "string",
              "required": false,
              "default_value": null
            },
            {
              "key": "existing_devops_resource_group_name",
              "type": "string",
              "required": false,
              "default_value": null
            },
            {
              "key": "access_token_expiration",
              "type": "string",
              "required": false,
              "default_value": "3600"
            },
            {
              "key": "active_session_timeout",
              "type": "int",
              "required": false,
              "default_value": 86400
            },
            {
              "key": "api_creation",
              "type": "string",
              "required": false,
              "default_value": "RESTRICTED",
              "options": [
                "RESTRICTED",
                "NOT_RESTRICTED",
                "NOT_SET"
              ]
            },
            {
              "key": "enforce_allowed_ip_addresses",
              "type": "boolean",
              "required": false,
              "default_value": true,
              "description": "If true IP address restriction will be enforced, If false, traffic originated outside specified allowed IP address set is monitored with audit events sent to Activity Tracker. After running in monitored mode to test this variable, it should then explicitly be set to true to enforce IP allow listing, has no effect when `skip_iam_account_settings` is true."
            },
            {
              "key": "inactive_session_timeout",
              "type": "string",
              "required": false,
              "default_value": "7200"
            },
            {
              "key": "max_sessions_per_identity",
              "type": "string",
              "required": false,
              "default_value": "NOT_SET"
            },
            {
              "key": "mfa",
              "type": "string",
              "required": false,
              "default_value": "TOTP4ALL",
              "options": [
                "NONE",
                "TOTP",
                "TOTP4ALL",
                "LEVEL1",
                "LEVEL2",
                "LEVEL3"
              ]
            },
            {
              "key": "public_access_enabled",
              "type": "boolean",
              "required": false,
              "default_value": false
            },
            {
              "key": "refresh_token_expiration",
              "type": "string",
              "required": false,
              "default_value": "259200"
            },
            {
              "key": "serviceid_creation",
              "type": "string",
              "required": false,
              "default_value": "RESTRICTED",
              "options": [
                "RESTRICTED",
                "NOT_RESTRICTED",
                "NOT_SET"
              ]
            },
            {
              "key": "shell_settings_enabled",
              "type": "boolean",
              "required": false,
              "default_value": true
            },
            {
              "key": "user_mfa",
              "type": "array",
              "required": false,
              "default_value": []
            },
            {
              "key": "user_mfa_reset",
              "type": "boolean",
              "required": false,
              "default_value": false
            },
            {
              "key": "cos_plan",
              "type": "string",
              "required": false,
              "default_value": "standard",
              "options": [
                "standard",
                "cos-one-rate-plan"
              ]
            },
            {
              "key": "cos_instance_name",
              "type": "string",
              "required": false,
              "default_value": null
            },
            {
              "key": "cos_instance_access_tags",
              "type": "array",
              "required": false,
              "default_value": []
            },
            {
              "key": "cos_bucket_name",
              "type": "string",
              "required": false,
              "default_value": null
            },
            {
              "key": "cos_bucket_access_tags",
              "type": "array",
              "required": false,
              "default_value": []
            },
            {
              "key": "cos_bucket_expire_enabled",
              "type": "boolean",
              "required": false,
              "default_value": false
            },
            {
              "key": "cos_bucket_expire_days",
              "type": "int",
              "required": false,
              "default_value": 365
            },
            {
              "key": "cos_bucket_object_versioning_enabled",
              "type": "boolean",
              "required": false,
              "default_value": false
            },
            {
              "key": "cos_bucket_storage_class",
              "type": "string",
              "required": false,
              "default_value": null
            },
            {
              "key": "cos_bucket_archive_enabled",
              "type": "boolean",
              "required": false,
              "default_value": false
            },
            {
              "key": "cos_bucket_archive_days",
              "type": "int",
              "required": false,
              "default_value": 20
            },
            {
              "key": "cos_bucket_archive_type",
              "type": "string",
              "required": false,
              "default_value": "Glacier",
              "options": [
                "Glacier",
                "Accelerated"
              ]
            },
            {
              "key": "cos_bucket_retention_enabled",
              "type": "boolean",
              "required": false,
              "default_value": false
            },
            {
              "key": "cos_bucket_retention_default",
              "type": "int",
              "required": false,
              "default_value": 90,
              "description": "Specifies default number of days an object that can be kept unmodified for COS bucket."
            },
            {
              "key": "cos_bucket_retention_maximum",
              "type": "int",
              "required": false,
              "default_value": 350,
              "description": "Specifies maximum number of days an object that can be kept unmodified for COS bucket."
            },
            {
              "key": "cos_bucket_retention_minimum",
              "type": "int",
              "required": false,
              "default_value": 90,
              "description": "Specifies minimum number of days an object must be kept unmodified for COS bucket."
            },
            {
              "key": "cos_bucket_retention_permanent",
              "type": "boolean",
              "required": false,
              "default_value": false
            },
            {
              "key": "skip_atracker_cos_iam_auth_policy",
              "type": "boolean",
              "required": false,
              "default_value": false
            },
            {
              "key": "cos_target_name",
              "type": "string",
              "required": false,
              "default_value": null
            },
            {
              "key": "activity_tracker_route_name",
              "type": "string",
              "required": false,
              "default_value": null
            },
            {
              "key": "activity_tracker_locations",
              "type": "array",
              "required": false,
              "default_value": ["*", "global"]
            },
            {
              "key": "provision_trusted_profile_projects",
              "type": "boolean",
              "required": false,
              "default_value": true
            },
            {
              "key": "trusted_profile_name",
              "type": "string",
              "required": false,
              "default_value": null
            },
            {
              "key": "trusted_profile_description",
              "type": "string",
              "required": false,
              "default_value": "Trusted Profile for Projects access"
            },
            {
              "key": "trusted_profile_roles",
              "type": "array",
              "required": false,
              "default_value": ["Administrator"]
            }
          ]
        }
      ]
    }
  ]
}
